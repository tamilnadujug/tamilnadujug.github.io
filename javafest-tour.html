<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JAVAFEST TOUR Registration</title>
    <meta name="robots" content="noindex" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/scss/styles.scss" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">
        <img src="tamil_jug.jpeg" alt="Tamil JUG Logo" style="width: 50px" />
        <a class="navbar-brand fw-bold" href="index.html">Tamilnadu JUG</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="blogs.html">Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">ChapterLeads</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">OpenSource</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="events.html">Events</a>
            </li>
            <!-- <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="register.html">Register</a></li> -->
          </ul>
        </div>
      </div>
    </nav>
    <section id="javafest-tour">
      <div class="container">
        <h2 id="formTitle">JAVAFEST TOUR Registration</h2>
        <form id="registrationForm">
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input type="text" class="form-control" id="firstName" required />
          </div>
          <div class="mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text" class="form-control" id="lastName" required />
          </div>
          <div class="mb-3">
            <label for="company" class="form-label">Company</label>
            <input type="text" class="form-control" id="company" required />
          </div>
          <div class="mb-3">
            <label for="fromLocation" class="form-label">From</label>
            <select class="form-select" id="fromLocation" required>
              <option value="">Select Location</option>
              <option value="Chennai">Chennai</option>
              <option value="Coimbatore">Coimbatore</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary w-100">
            Register | ₹2000.00
          </button>
        </form>
        <div id="qrCodeContainer" class="d-none">
          <h4 class="text-primary">Scan to Pay for JAVAFEST TOUR</h4>
          <div id="qrcode"></div>
          <!-- This is where the QR code will be generated -->
          <p class="mt-3">
            Or click the link below if scanning is not possible:
          </p>
          <a id="paymentLink" href="#" target="_blank" class="btn btn-success"
            >Open Google Pay / UPI App</a
          >
          <p class="mt-2 text-muted">Amount: ₹2000.00</p>
        </div>
      </div>
    </section>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- qrcode.js library -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.js"
      integrity="sha512-is1ls2rgwpFZyixqKFEExPHVUUL+pPkBEPw47s/6NDQ4n1m6T/ySeDW3p54jp45z2EJ0RSOgilqee1WhtelXfA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      document
        .getElementById("registrationForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent default form submission

          // --- Configuration for UPI Payment ---
          const upiId = "XXX"; // *** IMPORTANT: Replace with the actual UPI ID ***
          const amount = "2000.00"; // Amount in Rupees
          const currency = "INR";
          const payeeName = "JAVAFEST TOUR"; // Payee name to display in UPI app
          // --- End Configuration ---

          const firstName = document.getElementById("firstName").value;
          const lastName = document.getElementById("lastName").value;
          const company = document.getElementById("company").value;
          const fromLocation = document.getElementById("fromLocation").value;

          const transactionRefId = "JAVAFEST" + Date.now(); // Unique transaction ID

          let upiUrl = `upi://pay?pa=${upiId}&pn=${encodeURIComponent(
            payeeName
          )}`;
          upiUrl += `&am=${amount}`;
          upiUrl += `&cu=${currency}`;
          upiUrl += `&tr=${transactionRefId}`;
          upiUrl += `&tn=${encodeURIComponent(
            `JAVAFEST Registration for ${firstName} ${lastName} from ${company}, ${fromLocation}`
          )}`;

          // Hide the form and title
          document.getElementById("registrationForm").classList.add("d-none");
          document.getElementById("formTitle").classList.add("d-none");

          // Show the QR code container
          const qrCodeContainer = document.getElementById("qrCodeContainer");
          qrCodeContainer.classList.remove("d-none");

          // Generate the QR Code
          const qrcodeDiv = document.getElementById("qrcode");
          // Clear any existing QR code
          qrcodeDiv.innerHTML = "";

          // Create a new QR code
          new QRCode(qrcodeDiv, {
            text: upiUrl,
            width: 256,
            height: 256,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.L,
          });

          // Set the payment link href
          const paymentLinkElement = document.getElementById("paymentLink");
          paymentLinkElement.href = upiUrl;

          // Optionally, try to open the UPI app directly for mobile users
          // window.location.href = upiUrl; // Uncomment this if you want it to try opening the app immediately
        });
    </script>
  </body>
</html>
